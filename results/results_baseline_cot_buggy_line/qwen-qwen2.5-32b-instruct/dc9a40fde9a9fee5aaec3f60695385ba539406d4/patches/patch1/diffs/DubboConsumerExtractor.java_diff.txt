7a8
> import org.apache.dubbo.common.URL;
9a11
> import java.util.concurrent.CompletableFuture;
20a23
> 
24a28
> 
38d41
<             // need to set invoke mode to FUTURE if return type is CompletableFuture
43,45c46,50
<             RpcContext.getContext().setFuture(asyncRpcResult);
<             // save for 2.6.x compatibility, for example, TraceFilter in Zipkin uses com.alibaba.xxx.FutureAdapter
<             FutureContext.getContext().setCompatibleFuture(asyncRpcResult);
---
>             // Convert AsyncRpcResult to CompletableFuture for compatibility
>             CompletableFuture<Object> future = new CompletableFuture<>();
>             future.complete(asyncRpcResult.getValue());
>             RpcContext.getContext().setFuture(future);
>             FutureContext.getContext().setCompatibleFuture(future);
