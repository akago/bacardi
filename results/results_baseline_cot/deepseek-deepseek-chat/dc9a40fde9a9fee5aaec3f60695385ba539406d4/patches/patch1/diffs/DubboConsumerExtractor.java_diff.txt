10a11,12
> import java.util.concurrent.CompletableFuture;
> 
43c45,46
<             RpcContext.getContext().setFuture(asyncRpcResult);
---
>             CompletableFuture<?> future = asyncRpcResult.thenApply(r -> r);
>             RpcContext.getContext().setFuture(future);
45c48
<             FutureContext.getContext().setCompatibleFuture(asyncRpcResult);
---
>             FutureContext.getContext().setCompatibleFuture(future);
