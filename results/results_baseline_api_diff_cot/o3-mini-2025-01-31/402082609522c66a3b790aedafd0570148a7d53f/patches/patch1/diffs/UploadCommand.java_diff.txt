9d8
< 
11,20c10,15
< 
< import org.spongepowered.api.command.CommandResult;
< import org.spongepowered.api.command.CommandSource;
< import org.spongepowered.api.command.args.CommandContext;
< import org.spongepowered.api.command.spec.CommandExecutor;
< import org.spongepowered.api.command.spec.CommandSpec;
< import org.spongepowered.api.scheduler.Task;
< 
< import static org.spongepowered.api.command.args.GenericArguments.string;
< import static org.spongepowered.api.text.Text.of;
---
> import net.kyori.adventure.audience.Audience;
> import org.spongepowered.api.Game;
> import org.spongepowered.api.command.Command;
> import org.spongepowered.api.command.CommandExecutor;
> import org.spongepowered.api.command.parameter.CommandContext;
> import org.spongepowered.api.command.parameter.Parameter;
28c23
<     UploadCommand(ChangeSkinSponge plugin, ChangeSkinCore core) {
---
>     public UploadCommand(ChangeSkinSponge plugin, ChangeSkinCore core) {
32a28,30
>     // Updated to follow the new Sponge command API:
>     // The new CommandExecutor method now receives a single CommandContext parameter
>     // and returns an int (with a nonzero value typically indicating success).
34,35c32,37
<     public CommandResult execute(CommandSource src, CommandContext args) {
<         String url = args.<String>getOne("url").get();
---
>     public int execute(CommandContext context) throws Exception {
>         // Retrieve the sender from the command execution cause.
>         Audience src = context.cause().first(Audience.class)
>                 .orElseThrow(() -> new Exception("Command source not found"));
>         String url = context.one("url").get();
> 
43c45,47
<                 Task.builder().async().execute(skinUploader).submit(plugin);
---
>                 // In the new API the old Task builder has been removed.
>                 // Instead, we schedule the task asynchronously via the scheduler’s executor.
>                 plugin.getGame().scheduler().executor(plugin).submit(skinUploader);
48,49c52,53
< 
<         return CommandResult.success();
---
>         // Return 1 to indicate successful command execution.
>         return 1;
51a56,57
>     // Updated to build a Command using the new API.
>     // Note: The return type has been changed from the now‐removed CommandSpec to Command.
53,54c59,60
<     public CommandSpec buildSpec() {
<         return CommandSpec.builder()
---
>     public Command buildSpec() {
>         return Command.builder()
56c62
<                 .arguments(string(of("url")))
---
>                 .addParameter(Parameter.string().key("url").build())
