3d2
< import com.flowpowered.math.vector.Vector3d;
8,10d6
< 
< import java.util.UUID;
< 
12,13c8,9
< import org.spongepowered.api.command.CommandSource;
< import org.spongepowered.api.data.key.Keys;
---
> import org.spongepowered.api.command.source.CommandSource;
> import org.spongepowered.api.data.manipulator.mutable.entity.VanishData;
18a15,18
> import org.spongepowered.math.vector.Vector3d;
> 
> import java.util.Optional;
> import java.util.UUID;
26,27c26
<     public SkinApplier(ChangeSkinSponge plugin, CommandSource invoker, Player receiver, SkinModel targetSkin
<             , boolean keepSkin) {
---
>     public SkinApplier(ChangeSkinSponge plugin, CommandSource invoker, Player receiver, SkinModel targetSkin, boolean keepSkin) {
29d27
< 
41c39
<         //uuid was successful resolved, we could now make a cooldown check
---
>         // uuid was successfully resolved, now perform a cooldown check
63d60
< 
83,85c80,88
<         //triggers an update for others player to see the new skin
<         receiver.offer(Keys.VANISH, true);
<         receiver.offer(Keys.VANISH, false);
---
>         // Triggers an update for other players to see the new skin by toggling vanish data.
>         Optional<VanishData> vanishDataOpt = receiver.get(VanishData.class);
>         if (vanishDataOpt.isPresent()) {
>             VanishData vanishData = vanishDataOpt.get();
>             vanishData.vanished().set(true);
>             receiver.offer(vanishData);
>             vanishData.vanished().set(false);
>             receiver.offer(vanishData);
>         }
