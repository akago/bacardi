23d22
< import org.apache.thrift.transport.TFramedTransport;
25a25
> import org.apache.thrift.transport.layered.TFramedTransport; // Updated import: using new package
45d44
< 
53d51
< 
63c61
<   // The framed framedTransport.
---
>   // The framed transport.
80,81c78,80
<     this.framedTransport = new TFramedTransport(new TIOStreamTransport(this
<         .byteOffsetInputStream), maxMessageSize);
---
>     TTransport ioStreamTransport = new TIOStreamTransport(this.byteOffsetInputStream);
>     // Use the new Factory from the layered TFramedTransport to create an instance using maxMessageSize.
>     this.framedTransport = new TFramedTransport.Factory(maxMessageSize).getTransport(ioStreamTransport);
